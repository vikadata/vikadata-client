(()=>{var e={14:(e,t,l)=>{const{webContents:o,ipcMain:n}=l(933),{autoUpdater:r}=l(346),{publishUrl:a}=l(177);let s="";function c(e,t){o.getFocusedWebContents().send("message",{message:e,data:t})}e.exports={checkForUpdate:()=>{r.setFeedURL(a),r.on("error",(e=>{c("err",e)})),r.on("checking-for-update",(e=>{c("checking-for-update",e)})),r.on("download-progress",(e=>{c("download-progress",e)})),r.on("update-downloaded",((e,t,l,o,a,p)=>{n.on("updateNow",((e,t)=>{r.quitAndInstall()})),c("isUpdateNow",s)})),r.checkForUpdates().then((e=>{s=e.updateInfo}))}}},177:e=>{e.exports={env:{prod:"production",dev:"development",local:"localhost"},publishUrl:"http://192.168.50.117:8080/"}},747:(e,t,l)=>{const{app:o,shell:n,webContents:r,Menu:a}=l(933),{env:s}=l(177),{getUrl:c}=l(288),{checkForUpdate:p}=l(14);let d="production";function i(e){d=e;const t=`${r.userAgent} VikaDesktop/${process.env["npm_package_version:"]}`;r.getFocusedWebContents().loadURL(c(d),{userAgent:t})}const u=[{label:o.name,submenu:[{role:"about",label:"关于维格表"},{label:"检查更新",click:()=>p()},{type:"separator"},{role:"quit",label:"退出维格表"}]},{label:"文件",submenu:[{role:"close",label:"关闭当前窗口"}]},{label:"编辑",submenu:[{role:"undo",label:"撤消"},{role:"redo",label:"重做"},{role:"cut",label:"剪切"},{role:"copy",label:"复制"},{role:"paste",label:"粘贴"},{role:"selectAll",label:"全选"}]},{label:"工具",submenu:[{role:"reload",label:"刷新"},{role:"toggleDevTools",label:"开发者工具"},{role:"togglefullscreen",label:"全屏展示"},{label:"切换环境",submenu:[{label:"localhost",type:"radio",checked:d===s.local,click:()=>i(s.local)},{label:"integration",type:"radio",checked:d===s.dev,click:()=>i(s.dev)},{label:"staging",type:"radio",checked:d===s.prod,click:()=>i(s.prod)}],visible:d===s.dev||d===s.local}]},{label:"帮助",submenu:[{label:"帮助文档",click:()=>{n.openExternal("https://vika.cn/help")}}]}],b=a.buildFromTemplate(u);a.setApplicationMenu(b),e.exports={currentEnv:d}},288:(e,t,l)=>{const{env:o}=l(177);e.exports.getUrl=e=>{switch(e){case o.prod:return"https://vika.cn/";case o.dev:return"https://integration.vika.ltd/";default:return"http://localhost:3000/"}}},933:e=>{"use strict";e.exports=require("electron")},346:e=>{"use strict";e.exports=require("electron-updater")}},t={};function l(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,l),n.exports}(()=>{const{app:e,shell:t,BrowserWindow:o,Menu:n}=l(933),{currentEnv:r}=l(747),{getUrl:a}=l(288);let s=null;function c(){s=new o({width:1200,height:800,minWidth:320,minHeight:568,webPreferences:{nodeIntegration:!0},enableRemoteModule:!1});const e=`${s.webContents.userAgent} VikaDesktop/${process.env.npm_package_version}`;s.loadURL(a(r),{userAgent:e})}e.whenReady().then(c),e.setAppUserModelId("维格表"),e.on("window-all-closed",(()=>{"darwin"!==process.platform&&e.quit()})),e.on("activate",(()=>{0===o.getAllWindows().length&&c()})),e.on("web-contents-created",((e,l)=>{l.on("new-window",((e,l)=>{e.preventDefault(),t.openExternal(l)}))}))})()})();